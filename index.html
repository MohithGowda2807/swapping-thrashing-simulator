<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Thrashing & Swapping Visualizer | Memory Management Simulator</title>
    <meta name="description"
        content="Real-time 3D visualization of paging, swapping, and thrashing in operating system memory management. Educational demo with FIFO and LRU page replacement.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="title-icon">üíæ</span>
                    <span class="title-text">
                        <span class="gradient-text">Thrashing & Swapping</span>
                        <span class="subtitle">3D Memory Visualizer</span>
                    </span>
                </h1>
                <div class="header-info">
                    <span class="badge">Three.js</span>
                    <span class="badge">Real-Time</span>
                    <span class="badge">Interactive</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Panel - Controls -->
            <aside class="panel panel-left">
                <div id="scenario-container"></div>
                <div id="controls-container"></div>
            </aside>

            <!-- Center - 3D Visualization -->
            <section class="panel panel-center">
                <div class="visualization-wrapper">
                    <div id="visualization-container" class="visualization-canvas"></div>
                    <div class="visualization-overlay">
                        <div class="legend">
                            <div class="legend-item">
                                <span class="legend-color ram-color"></span>
                                <span>RAM (Physical Memory)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color disk-color"></span>
                                <span>Disk (Swap Space)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color fault-color"></span>
                                <span>Page Fault</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Right Panel - KPIs & Log -->
            <aside class="panel panel-right">
                <div id="activity-panel-container"></div>
                <div id="kpi-container"></div>
                <div id="event-log-container"></div>
            </aside>
        </main>

        <!-- Footer Info -->
        <footer class="app-footer">
            <div class="info-cards expanded">
                <div class="info-card">
                    <h4>üñ•Ô∏è Virtual Memory</h4>
                    <p>An abstraction that gives each process the illusion of having its own large, contiguous memory space. The OS maps virtual addresses to physical RAM or disk, allowing programs larger than physical memory to run.</p>
                </div>
                <div class="info-card">
                    <h4>üìÑ Paging</h4>
                    <p>Memory is divided into fixed-size blocks called <strong>pages</strong> (typically 4KB). RAM is divided into <strong>frames</strong> of the same size. The <strong>page table</strong> maps virtual pages to physical frames.</p>
                </div>
                <div class="info-card">
                    <h4>üéØ Page Fault</h4>
                    <p>Occurs when a process accesses a page not currently in RAM. The CPU traps to the OS, which must locate the page on disk, find a free frame (or evict a page), load the page, and update the page table. This is <em>expensive</em> (milliseconds vs nanoseconds).</p>
                </div>
                <div class="info-card">
                    <h4>üîÑ Swapping</h4>
                    <p>When RAM is full, the OS moves ("swaps") inactive pages to disk swap space to free frames for active pages. <strong>Swap Out</strong>: RAM ‚Üí Disk. <strong>Swap In</strong>: Disk ‚Üí RAM. Each swap involves disk I/O.</p>
                </div>
                <div class="info-card">
                    <h4>üìä FIFO Algorithm</h4>
                    <p><strong>First-In-First-Out</strong>: Evicts the oldest page in RAM. Simple to implement using a queue. Drawback: may evict frequently-used pages (suffers from Belady's anomaly).</p>
                </div>
                <div class="info-card">
                    <h4>üìà LRU Algorithm</h4>
                    <p><strong>Least Recently Used</strong>: Evicts the page that hasn't been accessed for the longest time. Based on temporal locality principle. More effective but requires tracking access times.</p>
                </div>
                <div class="info-card">
                    <h4>üî• Thrashing</h4>
                    <p>When the system spends more time swapping pages than executing processes. Causes: too many processes, insufficient RAM, poor locality. Symptoms: high disk I/O, low CPU utilization. Solution: reduce multiprogramming or add RAM.</p>
                </div>
                <div class="info-card">
                    <h4>‚å®Ô∏è Keyboard Shortcuts</h4>
                    <p><kbd>Space</kbd> Play/Pause | <kbd>‚Üí</kbd> Step | <kbd>R</kbd> Reset | <kbd>1-3</kbd> Scenarios</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <!-- Core Classes -->
    <script src="js/core/Page.js"></script>
    <script src="js/core/Frame.js"></script>
    <script src="js/core/DiskBlock.js"></script>
    <script src="js/core/Process.js"></script>
    <script src="js/core/SwapSystem.js"></script>

    <!-- Policies -->
    <script src="js/policies/PolicyInterface.js"></script>
    <script src="js/policies/FIFO.js"></script>
    <script src="js/policies/LRU.js"></script>

    <!-- Simulation -->
    <script src="js/simulation/Scenarios.js"></script>
    <script src="js/simulation/WorkloadGenerator.js"></script>
    <script src="js/simulation/SimulationEngine.js"></script>

    <!-- Rendering -->
    <script src="js/rendering/SceneManager.js"></script>
    <script src="js/rendering/RAMVisualizer.js"></script>
    <script src="js/rendering/DiskVisualizer.js"></script>
    <script src="js/rendering/PageRenderer.js"></script>
    <script src="js/rendering/EffectsManager.js"></script>

    <!-- UI -->
    <script src="js/ui/KPIDashboard.js"></script>
    <script src="js/ui/Controls.js"></script>
    <script src="js/ui/EventLog.js"></script>
    <script src="js/ui/ScenarioSelector.js"></script>
    <script src="js/ui/ActivityPanel.js"></script>

    <!-- Main Application -->
    <script src="js/main.js"></script>
</body>

</html>